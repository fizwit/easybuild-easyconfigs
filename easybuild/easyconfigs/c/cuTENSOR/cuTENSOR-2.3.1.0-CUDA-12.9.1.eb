easyblock = 'Tarball'

name = 'cuTENSOR'
version = '2.3.1.0'
versionsuffix = '-CUDA-12.9.1'

homepage = 'https://developer.nvidia.com/cutensor'
description = """The cuTENSOR Library is a GPU-accelerated tensor linear algebra library providing tensor contraction,
 reduction and elementwise operations."""

toolchain = SYSTEM

local_arch = {
    'aarch64': 'sbsa'
}
source_urls = [
    'https://developer.download.nvidia.com/compute/cutensor/redist/libcutensor/linux-%s/' % local_arch.get(ARCH, ARCH)
]
sources = ['libcutensor-linux-%s-%%(version)s_cuda12-archive.tar.xz' % local_arch.get(ARCH, ARCH)]

checksums = [{
    'libcutensor-linux-sbsa-%(version)s_cuda12-archive.tar.xz':
        'f3763cdc7b03ca08e348efb6faa35d461537390ce7d059e279e415b33dad8291',
    'libcutensor-linux-x86_64-%(version)s_cuda12-archive.tar.xz':
        'b1d7ad37b24cd66a446ae76ac33bd5125aa58007a604cb64fc9c014a8d685940',
}]


dependencies = [('CUDA', '12.9.1')]

sanity_check_paths = {
    'files': ['include/cutensor.h', 'include/cutensor/types.h',
              'lib/libcutensor.%s' % (SHLIB_EXT),
              'lib/libcutensor_static.a'],
    'dirs': [],
}


moduleclass = 'lib'
