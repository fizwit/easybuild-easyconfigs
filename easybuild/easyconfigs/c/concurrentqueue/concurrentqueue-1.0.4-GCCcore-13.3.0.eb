easyblock = 'CMakeMake'

name = 'concurrentqueue'
version = '1.0.4'

homepage = 'https://github.com/cameron314/concurrentqueue'
description = """
A fast multi-producer, multi-consumer lock-free concurrent queue for C++11
"""

toolchain = {'name': 'GCCcore', 'version': '13.3.0'}

source_urls = ['https://github.com/cameron314/concurrentqueue/archive/']
sources = ['v%(version)s.tar.gz']
checksums = ['87fbc9884d60d0d4bf3462c18f4c0ee0a9311d0519341cac7cbd361c885e5281']

builddependencies = [
    ('binutils', '2.42'),
    ('CMake', '3.29.3'),
]

postinstallcmds = [
    'ln -s %(installdir)s/include/%(name)s/moodycamel/*.h %(installdir)s/include/%(name)s',
    'ln -s %(installdir)s/include/%(name)s/moodycamel/*.h %(installdir)s/include',
]

sanity_check_paths = {
    'files': ['include/concurrentqueue.h'],
    'dirs': ['include/concurrentqueue', 'lib/cmake/concurrentqueue'],
}

moduleclass = 'lib'
