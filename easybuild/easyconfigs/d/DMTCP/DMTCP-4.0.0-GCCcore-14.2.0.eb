easyblock = 'ConfigureMake'

name = 'DMTCP'
version = '4.0.0'

homepage = 'https://github.com/dmtcp/dmtcp/'
description = """DMTCP is a tool to transparently checkpoint the state of multiple
simultaneous applications, including multi-threaded and distributed applications.
It operates directly on the user binary executable, without any Linux kernel modules
or other kernel modifications."""

toolchain = {'name': 'GCCcore', 'version': '14.2.0'}

source_urls = ['https://github.com/dmtcp/dmtcp/archive/']
sources = ['%(version)s.tar.gz']
checksums = ['f958e7f18649a511bebf1a371d7fb494526109e838517218451b936b512372cb']

builddependencies = [('binutils', '2.42')]

sanity_check_paths = {
    'files': [f'bin/{x}' for x in ['dmtcp_command', 'dmtcp_coordinator', 'dmtcp_get_libc_offset', 'dmtcp_launch',
              'dmtcp_nocheckpoint', 'dmtcp_restart', 'dmtcp_ssh', 'dmtcp_sshd', 'mtcp_restart']],
    'dirs': [],
}

moduleclass = 'tools'
