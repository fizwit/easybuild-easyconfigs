easyblock = 'CMakeMake'

name = 'OpenColorIO'
version = '2.4.2'

homepage = 'https://opencolorio.org/'
description = """A complete color management solution geard towards motion
picture production with an emphasis on visual effects and computer animation."""

toolchain = {'name': 'GCC', 'version': '13.2.0'}

source_urls = ['https://github.com/AcademySoftwareFoundation/OpenColorIO/archive/refs/tags/']
sources = ['v%(version)s.tar.gz']

builddependencies = [
    ('CMake', '3.27.6'),
]
dependencies = [
    ('expat', '2.5.0'),
    ('yaml-cpp', '0.8.0'),
    ('zlib', '1.2.13'),
    ('LittleCMS', '2.15'),
    ('OpenEXR', '3.2.0'),
    ('pybind11', '2.11.1'),
    ('libGLU', '9.0.3'),
    ('glew', '2.2.0', '-egl'),
    ('freeglut', '3.6.0'),
]

#separate_build_dir = True

# When MISSING is set instead of NONE it will build all the required dependencies
# that could not be found. This is pystring and minizip-ng
configopts = "-DOCIO_INSTALL_EXT_PACKAGES=MISSING "
configopts += "-DGLUT_name=$EBROOTFREEGLUT/lib/libglut.%s " % SHLIB_EXT
configopts += "-DGLUT_INCLUDE_DIR=$EBROOTFREEGLUT/include "

sanity_check_commands = ["ociocheck"]

moduleclass = 'lib'
