easyblock = 'MesonNinja'

name = 'libnotify'
version = '0.8.7'

homepage = 'https://gitlab.gnome.org/GNOME/libnotify'
description = """libnotify is a library for sending desktop notifications to a notification daemon, as defined in the
org.freedesktop.Notifications Desktop Specification. These notifications can be used to inform the user about an event
or display some form of information without getting in the user's way."""

toolchain = {'name': 'GCCcore', 'version': '14.2.0'}

source_urls = ['https://gitlab.gnome.org/GNOME/libnotify/-/archive/%(version)s/']
sources = [SOURCELOWER_TAR_GZ]
checksums = ['b041ab7e4eb8cd16eafa6ae853274120ee3210aa6913614d9e774e6c45839723']

builddependencies = [
    ('binutils', '2.42'),
    ('CMake', '3.31.3'),
    ('Meson', '1.6.1'),
    ('Ninja', '1.12.1'),
    ('pkgconf', '2.3.0'),
    ('Python', '3.13.1'),
    ('Xvfb', '21.1.18'),
]

dependencies = [
    ('binutils', '2.42'),
    ('Meson', '1.6.1'),
    ('Ninja', '1.12.1'),
    ('GObject-Introspection', '1.84.0'),
    ('Gdk-Pixbuf', '2.42.12'),
    ('GTK4', '4.21.0'),
]

configopts = '-Dman=false -Dgtk_doc=false -Ddocbook_docs=disabled'

sanity_check_paths = {
    'files': ['bin/notify-send', f'lib/libnotify.{SHLIB_EXT}'],
    'dirs': [],
}

sanity_check_commands = ['notify-send --help']

moduleclass = 'lib'
